<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Find the Button</title>
<style>
  body{margin:0;background:#111;color:#fff;font-family:sans-serif;overflow:hidden}
  .popup{position:fixed;background:#222;border:2px solid #444;border-radius:8px;
         box-shadow:0 6px 20px rgba(0,0,0,.6);width:320px;height:120px}
  .drag{height:26px;background:#333;color:#eee;padding:4px 8px;font-size:14px;
        cursor:move;border-top-left-radius:6px;border-top-right-radius:6px}
  .close{position:absolute;top:4px;right:6px;color:#bbb;background:none;border:none;
         font-size:18px;cursor:pointer}
  .close:hover{color:#f55}
  .popup-body{padding:4px;height:80px;overflow:hidden}
  .target{display:inline-block;padding:6px 12px;background:#222;border:1px solid #333;
          color:#333;cursor:pointer;border-radius:6px}
  .reveal{background:#ff0 !important;color:#000 !important;
          animation:fade 1s infinite alternate}
  @keyframes fade{from{opacity:.4}to{opacity:1}}
  #overlay{position:fixed;inset:0;display:none;align-items:center;justify-content:center;
           background:rgba(0,0,0,.7);z-index:1000}
  #overlay div{background:#000;padding:20px;border-radius:8px;text-align:center}
  #overlay h2{margin-top:0}
  #overlay button{margin-top:10px;padding:8px 14px;border:none;border-radius:6px;
                  background:#f55;color:#fff;cursor:pointer}
</style>
</head>
<body>
<div id="overlay"><div><h2 id="msg"></h2><button onclick="location.reload()">Restart</button></div></div>

<script>
const TOTAL=30, LIMIT=15000;
let popups=[],targetIndex=Math.floor(Math.random()*TOTAL),found=false,timer;

/* create one popup */
function makePopup(i){
  const pad=20;
  let p=document.createElement('div');p.className='popup';
  p.style.left=Math.random()*(window.innerWidth-340)+'px';
  p.style.top=Math.random()*(window.innerHeight-160)+'px';

  let drag=document.createElement('div');drag.className='drag';drag.textContent='Ad Window';
  p.appendChild(drag);

  let x=document.createElement('button');x.className='close';x.innerHTML='&times;';
  x.onclick=()=>p.remove();p.appendChild(x);

  let body=document.createElement('div');body.className='popup-body';

  if(i===targetIndex){
    let btn=document.createElement('button');btn.className='target';btn.textContent='Click';
    btn.onclick=()=>{found=true;clearTimeout(timer);btn.classList.add('reveal');gameOver("You found it!")};
    body.appendChild(btn);p._target=btn;
  }else{
    // insert ad scripts programmatically
    let s1=document.createElement('script');
    s1.innerHTML=`
      atOptions = {
        'key' : '33c6e05f0ae701783ecead35e54f3b14',
        'format' : 'iframe',
        'height' : 50,
        'width' : 320,
        'params' : {}
      };
    `;
    let s2=document.createElement('script');
    s2.src="//www.highperformanceformat.com/33c6e05f0ae701783ecead35e54f3b14/invoke.js";
    body.appendChild(s1);
    body.appendChild(s2);
  }

  p.appendChild(body);
  document.body.appendChild(p);
  popups.push(p);

  // dragging
  let offsetX,offsetY,dragging=false;
  drag.onmousedown=e=>{
    dragging=true;offsetX=e.clientX-p.offsetLeft;offsetY=e.clientY-p.offsetTop;
  };
  document.onmousemove=e=>{
    if(dragging){
      p.style.left=(e.clientX-offsetX)+"px";
      p.style.top=(e.clientY-offsetY)+"px";
    }
  };
  document.onmouseup=()=>dragging=false;
}

/* spawn popups */
for(let i=0;i<TOTAL;i++) makePopup(i);

/* timer */
timer=setTimeout(()=>{
  if(!found){
    let t=popups[targetIndex]?._target;
    if(t){t.classList.add("reveal");}
    gameOver("Game Over - Time Up");
  }
},LIMIT);

/* overlay */
function gameOver(txt){
  document.getElementById('msg').textContent=txt;
  document.getElementById('overlay').style.display='flex';
}
</script>
</body>
</html>
